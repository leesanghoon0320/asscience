<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-Beauty ì „ë¬¸ í”Œë«í¼</title>
    
    <!-- PWA ì„¤ì • -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkstQmVhdXR5IOyghOusuOyEjeyatO2UkOudvO2KuCIsCiAgInNob3J0X25hbWUiOiAiSy1CZWF1dHkiLAogICJkZXNjcmlwdGlvbiI6ICLtmZTsnqXtkJPsoITsuoztlIQg7Jew6rWsIOuwsOydtOuCmOybiCDslYzrpqzplYDsvZgiLAogICJzdGFydF91cmwiOiAiLiIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgInRoZW1lX2NvbG9yIjogIiM2NjdlZWEiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmZmZmZmYiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlOVEV5SWlCb1pXbG5hSFE5SWpVeE1pSWdkbWxsZDBKdmVEMGlNQ0F3SURRNE15QTBPRFVPS0NJZ1ptbHNiRDBpSXpZMk4yVmxZU0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Memt4T1RrdmMyZG5JajRLSUNBOFoyOXVaejRLSUNBZ0lEeGtaV1p6UGdvZ0lDQWdJQ0E4YzNSNWJHVStMbTVsWVhJN0xtTnNZWE56ZTJacGJHdzZJek5GUTJRNU5UZGJQVUZiSWl3aUxTZF5aWHBoWHlMaWNDOGdJRnZQQ0FzVzE5WEdNdWU=IiwKICAgICAgInNpemVzIjogImFueSIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9CiAgXQp9">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="K-Beauty">
    
    <!-- ì˜¤í”„ë¼ì¸ ì§€ì›ì„ ìœ„í•œ ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                const swCode = `
                    const CACHE_NAME = 'k-beauty-v1';
                    const urlsToCache = ['./', 'offline.html'];
                    
                    self.addEventListener('install', function(event) {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then(function(cache) {
                                    return cache.addAll(urlsToCache.map(url => new Request(url, {cache: 'reload'})));
                                })
                        );
                    });
                    
                    self.addEventListener('fetch', function(event) {
                        event.respondWith(
                            caches.match(event.request)
                                .then(function(response) {
                                    return response || fetch(event.request);
                                }
                            )
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl)
                    .then(function(registration) {
                        console.log('ServiceWorker ë“±ë¡ ì„±ê³µ:', registration.scope);
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker ë“±ë¡ ì‹¤íŒ¨:', err);
                    });
            });
        }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5rem;
            color: #4a5568;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 10px;
        }

        .intro-box {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #ff8a65;
        }

        .step-section {
            background: rgba(255, 255, 255, 0.95);
            margin: 20px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .step-section:hover {
            transform: translateY(-5px);
        }

        .step-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            font-size: 1.4rem;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .collapse-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .collapse-btn.collapsed {
            transform: rotate(180deg);
        }

        .step-content {
            padding: 25px;
            transition: max-height 0.3s ease;
            overflow: hidden;
        }

        .step-content.collapsed {
            max-height: 0;
            padding: 0 25px;
        }

        .category {
            margin-bottom: 25px;
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .category:hover {
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
        }

        .category-title {
            font-weight: bold;
            font-size: 1.2rem;
            color: #4a5568;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .category-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 0.9rem;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: #f7fafc;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .option:hover {
            background: #e2e8f0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .option.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #4c51bf;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .option input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
            pointer-events: none;
        }

        .special-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            margin-top: 10px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .special-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .progress-bar {
            background: rgba(226, 232, 240, 0.8);
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .progress-fill {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }

        .summary-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .summary-title {
            font-size: 1.5rem;
            color: #4a5568;
            margin-bottom: 20px;
            text-align: center;
        }

        .selected-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .selected-category {
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .selected-category h4 {
            color: #4a5568;
            margin-bottom: 10px;
        }

        .selected-list {
            list-style: none;
            padding: 0;
        }

        .selected-list li {
            background: white;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 3px solid #667eea;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
        }

        .btn-tertiary {
            background: linear-gradient(135deg, #ed8936 0%, #dd6b20 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .install-prompt {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            display: none;
        }

        .install-prompt button {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 5px;
        }

        .floating-save {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .floating-save:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .options {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .floating-save {
                bottom: 10px;
                right: 10px;
                padding: 12px 16px;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 20px 15px;
            }

            .step-content {
                padding: 15px;
            }

            .category {
                padding: 15px;
            }

            .options {
                gap: 10px;
            }

            .option {
                padding: 10px 12px;
            }
        }

        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ì„±ê³µ ë©”ì‹œì§€ */
        .success-message {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .success-message.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>K-BEAUTY ì „ë¬¸ í”Œë«í¼</h1>
            <p>ê¸°ì´ˆì ì¸ ë‚´ìš©ì„ ì²´í¬í‘œì‹œí•˜ì—¬ ë§ì¶¤í˜• í™”ì¥í’ˆ ì†”ë£¨ì…˜ì„ ì°¾ì•„ë³´ì„¸ìš”</p>
            <div class="intro-box">
                <p><strong>ğŸŒŸ ê¸€ë¡œë²Œ íŠ¸ë Œë“œ</strong></p>
                <p>â€¢ ë¯¸ì£¼ì‹œì¥: ì»¤ìŠ¤í„°ë§ˆì´ì§• & ì¸í”Œë£¨ì–¸ì„œ í™”ì¥í’ˆ ì‹œì¥ í™•ëŒ€</p>
                <p>â€¢ ìœ ëŸ½ì‹œì¥: ESG, ì»¨ì„¼ì„œìŠ¤ ë·°í‹°, ì›°ë¹™, ì…€í”„ì¼€ì–´, ë§ì¶¤í˜• ì‹œì¥</p>
                <p>â€¢ ì „ì„¸ê³„: ë·°í‹° ë””ë°”ì´ìŠ¤ì™€ ê¸°ì´ˆí™”ì¥í’ˆì˜ ê²°í•© íŠ¸ë Œë“œ</p>
            </div>
            
            <!-- ì•± ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ -->
            <div class="install-prompt" id="installPrompt">
                <p>ğŸ“± ì´ ì•±ì„ í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ì—¬ ë” í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•˜ì„¸ìš”!</p>
                <button onclick="installApp()">ì„¤ì¹˜í•˜ê¸°</button>
                <button onclick="dismissInstall()">ë‚˜ì¤‘ì—</button>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- STEP 1: ê¸°ë³¸ ì •ë³´ -->
        <div class="step-section">
            <div class="step-header">
                STEP 1 - ê¸°ë³¸ ì œí’ˆ ì •ë³´
                <button class="collapse-btn" onclick="toggleSection(this)">â–¼</button>
            </div>
            <div class="step-content">
                <div class="category">
                    <div class="category-title">
                        <span class="category-number">1</span>
                        ì œí’ˆ ì¢…ë¥˜
                    </div>
                    <div class="options" data-category="products">
                        <div class="option" data-value="Skin/Body Care"><input type="checkbox"> ìŠ¤í‚¨/ë°”ë””ì¼€ì–´</div>
                        <div class="option" data-value="Hair Care"><input type="checkbox"> í—¤ì–´ì¼€ì–´</div>
                        <div class="option" data-value="Color(base)"><input type="checkbox"> ìƒ‰ì¡°(ë² ì´ìŠ¤)</div>
                        <div class="option" data-value="Hue (point)"><input type="checkbox"> ìƒ‰ì¡°(í¬ì¸íŠ¸)</div>
                        <div class="option" data-value="Solid soap"><input type="checkbox"> ê³ ì²´ë¹„ëˆ„</div>
                        <div class="option" data-value="perfume"><input type="checkbox"> í–¥ìˆ˜</div>
                        <div class="option" data-value="Quasi-drugs"><input type="checkbox"> ì˜ì•½ì™¸í’ˆ</div>
                        <div class="option" data-value="etc"><input type="checkbox"> ê¸°íƒ€</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">2</span>
                        ê¸°ëŠ¥ì„±
                    </div>
                    <div class="options" data-category="functional">
                        <div class="option" data-value="Whitening"><input type="checkbox"> ë¯¸ë°±</div>
                        <div class="option" data-value="wrinkles"><input type="checkbox"> ì£¼ë¦„ê°œì„ </div>
                        <div class="option" data-value="UV Protection"><input type="checkbox"> ìì™¸ì„ ì°¨ë‹¨</div>
                        <div class="option" data-value="Acne"><input type="checkbox"> ì—¬ë“œë¦„</div>
                        <div class="option" data-value="depilation"><input type="checkbox"> ì œëª¨</div>
                        <div class="option" data-value="Hair dye"><input type="checkbox"> ì—¼ëª¨</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">3</span>
                        ìµœì†Œì£¼ë¬¸ìˆ˜ëŸ‰ (MOQ)
                    </div>
                    <div class="options" data-category="moq">
                        <div class="option" data-value="500"><input type="checkbox"> 500ê°œ</div>
                        <div class="option" data-value="5000"><input type="checkbox"> 5,000ê°œ</div>
                        <div class="option" data-value="10000"><input type="checkbox"> 10,000ê°œ</div>
                        <div class="option" data-value="20000"><input type="checkbox"> 20,000ê°œ</div>
                        <div class="option" data-value="50000"><input type="checkbox"> 50,000ê°œ</div>
                        <div class="option" data-value="100000"><input type="checkbox"> 100,000ê°œ</div>
                        <div class="option" data-value="OVER"><input type="checkbox"> ê·¸ ì´ìƒ</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">4</span>
                        ì¸ì¦ ìš”êµ¬ì‚¬í•­
                    </div>
                    <div class="options" data-category="certification">
                        <div class="option" data-value="CGMP"><input type="checkbox"> CGMP</div>
                        <div class="option" data-value="ISO22716"><input type="checkbox"> ISO22716</div>
                        <div class="option" data-value="ISO9001"><input type="checkbox"> ISO9001</div>
                        <div class="option" data-value="Vegan"><input type="checkbox"> ë¹„ê±´</div>
                        <div class="option" data-value="Halal"><input type="checkbox"> í• ë„</div>
                        <div class="option" data-value="CPNP"><input type="checkbox"> CPNP</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">5</span>
                        íƒ€ê²Ÿ ì§€ì—­
                    </div>
                    <div class="options" data-category="region">
                        <div class="option" data-value="China"><input type="checkbox"> ì¤‘êµ­</div>
                        <div class="option" data-value="Japan"><input type="checkbox"> ì¼ë³¸</div>
                        <div class="option" data-value="South Korea"><input type="checkbox"> í•œêµ­</div>
                        <div class="option" data-value="Taiwan"><input type="checkbox"> ëŒ€ë§Œ</div>
                        <div class="option" data-value="Indonesia"><input type="checkbox"> ì¸ë„ë„¤ì‹œì•„</div>
                        <div class="option" data-value="Malaysia"><input type="checkbox"> ë§ë ˆì´ì‹œì•„</div>
                        <div class="option" data-value="Singapore"><input type="checkbox"> ì‹±ê°€í¬ë¥´</div>
                        <div class="option" data-value="Thailand"><input type="checkbox"> íƒœêµ­</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">6</span>
                        íƒ€ê²Ÿ ì—°ë ¹/ì„±ë³„
                    </div>
                    <div class="options" data-category="demographic">
                        <div class="option" data-value="teen"><input type="checkbox"> 10ëŒ€</div>
                        <div class="option" data-value="youth"><input type="checkbox"> 20-30ëŒ€</div>
                        <div class="option" data-value="Middle-aged"><input type="checkbox"> ì¤‘ë…„</div>
                        <div class="option" data-value="old age"><input type="checkbox"> ê³ ë ¹ì¸µ</div>
                        <div class="option" data-value="male"><input type="checkbox"> ë‚¨ì„±</div>
                        <div class="option" data-value="females"><input type="checkbox"> ì—¬ì„±</div>
                        <div class="option" data-value="Public"><input type="checkbox"> ê³µìš©</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 2: ìŠ¤í‚¨ì¼€ì–´ ì„¸ë¶€ì‚¬í•­ -->
        <div class="step-section">
            <div class="step-header">
                STEP 2 - ìŠ¤í‚¨ì¼€ì–´ ì„¸ë¶€ì‚¬í•­
                <button class="collapse-btn" onclick="toggleSection(this)">â–¼</button>
            </div>
            <div class="step-content">
                <div class="category">
                    <div class="category-title">
                        <span class="category-number">1</span>
                        ì œí’ˆ íƒ€ì…
                    </div>
                    <div class="options" data-category="skincare-type">
                        <div class="option" data-value="Skin"><input type="checkbox"> ìŠ¤í‚¨</div>
                        <div class="option" data-value="lotion"><input type="checkbox"> ë¡œì…˜</div>
                        <div class="option" data-value="cream"><input type="checkbox"> í¬ë¦¼</div>
                        <div class="option" data-value="Ampoules"><input type="checkbox"> ì•°í”Œ</div>
                        <div class="option" data-value="Cleansing"><input type="checkbox"> í´ë Œì§•</div>
                        <div class="option" data-value="moisturizing"><input type="checkbox"> ë³´ìŠµì œ</div>
                        <div class="option" data-value="Essence"><input type="checkbox"> ì—ì„¼ìŠ¤</div>
                        <div class="option" data-value="pack"><input type="checkbox"> íŒ©</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">2</span>
                        ìš©ëŸ‰ (ml)
                    </div>
                    <div class="options" data-category="capacity">
                        <div class="option" data-value="5 and under"><input type="checkbox"> 5ml ì´í•˜</div>
                        <div class="option" data-value="6~10"><input type="checkbox"> 6~10ml</div>
                        <div class="option" data-value="11~20"><input type="checkbox"> 11~20ml</div>
                        <div class="option" data-value="21~30"><input type="checkbox"> 21~30ml</div>
                        <div class="option" data-value="31~50"><input type="checkbox"> 31~50ml</div>
                        <div class="option" data-value="51~100"><input type="checkbox"> 51~100ml</div>
                        <div class="option" data-value="101~200"><input type="checkbox"> 101~200ml</div>
                        <div class="option" data-value="201~300"><input type="checkbox"> 201~300ml</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">3</span>
                        ìš©ê¸° í˜•íƒœ
                    </div>
                    <div class="options" data-category="container-shape">
                        <div class="option" data-value="regular"><input type="checkbox"> ì¼ë°˜í˜•</div>
                        <div class="option" data-value="dropper"><input type="checkbox"> ë“œë¡œí¼</div>
                        <div class="option" data-value="Roll-on"><input type="checkbox"> ë¡¤ì˜¨</div>
                        <div class="option" data-value="pump"><input type="checkbox"> íŒí”„</div>
                        <div class="option" data-value="Tube"><input type="checkbox"> íŠœë¸Œ</div>
                        <div class="option" data-value="vacuum"><input type="checkbox"> ì§„ê³µìš©ê¸°</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">4</span>
                        ìš©ê¸° ì¬ì§ˆ
                    </div>
                    <div class="options" data-category="container-material">
                        <div class="option" data-value="plastic"><input type="checkbox"> í”Œë¼ìŠ¤í‹±</div>
                        <div class="option" data-value="glass"><input type="checkbox"> ìœ ë¦¬</div>
                        <div class="option" data-value="metal"><input type="checkbox"> ê¸ˆì†</div>
                        <div class="option" data-value="transparency"><input type="checkbox"> íˆ¬ëª…</div>
                        <div class="option" data-value="opacity"><input type="checkbox"> ë¶ˆíˆ¬ëª…</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 3: ë§ˆì¼€íŒ… & íŒë§¤ -->
        <div class="step-section">
            <div class="step-header">
                STEP 3 - ë§ˆì¼€íŒ… & íŒë§¤ ì „ëµ
                <button class="collapse-btn" onclick="toggleSection(this)">â–¼</button>
            </div>
            <div class="step-content">
                <div class="category">
                    <div class="category-title">
                        <span class="category-number">1</span>
                        íŒë§¤ ì±„ë„
                    </div>
                    <div class="options" data-category="retail">
                        <div class="option" data-value="online"><input type="checkbox"> ì˜¨ë¼ì¸</div>
                        <div class="option" data-value="SNS"><input type="checkbox"> SNS</div>
                        <div class="option" data-value="Influencers"><input type="checkbox"> ì¸í”Œë£¨ì–¸ì„œ</div>
                        <div class="option" data-value="Home Shopping"><input type="checkbox"> í™ˆì‡¼í•‘</div>
                        <div class="option" data-value="Multishop"><input type="checkbox"> ë©€í‹°ìƒµ</div>
                        <div class="option" data-value="Single Shop"><input type="checkbox"> ë‹¨ë… ë§¤ì¥</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">2</span>
                        ë§ˆì¼€íŒ… ë°©ì‹
                    </div>
                    <div class="options" data-category="marketing">
                        <div class="option" data-value="SNS"><input type="checkbox"> SNS</div>
                        <div class="option" data-value="TV"><input type="checkbox"> TV</div>
                        <div class="option" data-value="magazine"><input type="checkbox"> ì¡ì§€</div>
                        <div class="option" data-value="Influencers"><input type="checkbox"> ì¸í”Œë£¨ì–¸ì„œ</div>
                        <div class="option" data-value="online"><input type="checkbox"> ì˜¨ë¼ì¸</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">3</span>
                        í•œêµ­ ì‹œì¥ í”Œë«í¼
                    </div>
                    <div class="options" data-category="korea-market">
                        <div class="option" data-value="Naver"><input type="checkbox"> ë„¤ì´ë²„</div>
                        <div class="option" data-value="Coupang"><input type="checkbox"> ì¿ íŒ¡</div>
                        <div class="option" data-value="11th Street"><input type="checkbox"> 11ë²ˆê°€</div>
                        <div class="option" data-value="Gmarket"><input type="checkbox"> Gë§ˆì¼“</div>
                        <div class="option" data-value="Olive Young"><input type="checkbox"> ì˜¬ë¦¬ë¸Œì˜</div>
                        <div class="option" data-value="Lotte"><input type="checkbox"> ë¡¯ë°</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">4</span>
                        ì‚¬ì—… ë°©ì‹
                    </div>
                    <div class="options" data-category="business-type">
                        <div class="option" data-value="ODM"><input type="checkbox"> ODM</div>
                        <div class="option" data-value="OEM"><input type="checkbox"> OEM</div>
                        <div class="option" data-value="Brand Distribution"><input type="checkbox"> ë¸Œëœë“œ ìœ í†µ</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 4: ì„±ë¶„ & ë¸Œëœë”© -->
        <div class="step-section">
            <div class="step-header">
                STEP 4 - ì„±ë¶„ & ë¸Œëœë”©
                <button class="collapse-btn" onclick="toggleSection(this)">â–¼</button>
            </div>
            <div class="step-content">
                <div class="category">
                    <div class="category-title">
                        <span class="category-number">1</span>
                        ì£¼ìš” ì„±ë¶„
                    </div>
                    <div class="options" data-category="ingredients">
                        <div class="option" data-value="peptide"><input type="checkbox"> í©íƒ€ì´ë“œ</div>
                        <div class="option" data-value="Retinol"><input type="checkbox"> ë ˆí‹°ë†€</div>
                        <div class="option" data-value="Stem Cells"><input type="checkbox"> ì¤„ê¸°ì„¸í¬</div>
                        <div class="option" data-value="Ceramides"><input type="checkbox"> ì„¸ë¼ë§ˆì´ë“œ</div>
                        <div class="option" data-value="Curcumin"><input type="checkbox"> ì»¤íë¯¼</div>
                        <div class="option" data-value="Madecassoside"><input type="checkbox"> ë§ˆë°ì¹´ì†Œì‚¬ì´ë“œ</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">2</span>
                        ìˆ˜ë¶„ ë°€ë„
                    </div>
                    <div class="options" data-category="moisture">
                        <div class="option" data-value="0.5"><input type="checkbox"> 0.5</div>
                        <div class="option" data-value="0.55"><input type="checkbox"> 0.55</div>
                        <div class="option" data-value="0.6"><input type="checkbox"> 0.6</div>
                        <div class="option" data-value="0.65"><input type="checkbox"> 0.65</div>
                        <div class="option" data-value="0.7"><input type="checkbox"> 0.7</div>
                        <div class="option" data-value="0.75"><input type="checkbox"> 0.75</div>
                        <div class="option" data-value="0.8"><input type="checkbox"> 0.8</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">3</span>
                        íŠ¹ìˆ˜ ì„±ë¶„ ìš”ì²­
                    </div>
                    <div class="options" data-category="special-ingredients">
                        <div class="option" data-value="yes"><input type="checkbox"> ìˆìŒ</div>
                        <div class="option" data-value="no"><input type="checkbox"> ì—†ìŒ</div>
                    </div>
                    <input type="text" class="special-input" placeholder="íŠ¹ìˆ˜ ì„±ë¶„ì´ ìˆë‹¤ë©´ êµ¬ì²´ì ìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”" id="specialIngredientInput">
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">4</span>
                        ë¼ë²¨ ë””ìì¸
                    </div>
                    <div class="options" data-category="label">
                        <div class="option" data-value="Design required"><input type="checkbox"> ë””ìì¸ í•„ìš”</div>
                        <div class="option" data-value="No design required"><input type="checkbox"> ë””ìì¸ ë¶ˆí•„ìš”</div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">5</span>
                        ë¸Œëœë“œ ë³´ìœ  ì—¬ë¶€
                    </div>
                    <div class="options" data-category="brand">
                        <div class="option" data-value="Hold"><input type="checkbox"> ë³´ìœ </div>
                        <div class="option" data-value="Not Owned"><input type="checkbox"> ë¯¸ë³´ìœ </div>
                    </div>
                </div>

                <div class="category">
                    <div class="category-title">
                        <span class="category-number">6</span>
                        ì»¨ì„¤íŒ… í•„ìš”ì„±
                    </div>
                    <div class="options" data-category="consulting">
                        <div class="option" data-value="need"><input type="checkbox"> í•„ìš”</div>
                        <div class="option" data-value="Unnecessary"><input type="checkbox"> ë¶ˆí•„ìš”</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì„ íƒ ì‚¬í•­ ìš”ì•½ -->
        <div class="summary-section">
            <h3 class="summary-title">ğŸ“‹ ì„ íƒ ì‚¬í•­ ìš”ì•½</h3>
            <div class="selected-items" id="selectedItems">
                <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ì„ íƒ í•­ëª©ë“¤ -->
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="exportData()">
                    ğŸ“„ ê²°ê³¼ ë‚´ë³´ë‚´ê¸°
                </button>
                <button class="btn btn-secondary" onclick="saveData()">
                    ğŸ’¾ ì„ì‹œì €ì¥
                </button>
                <button class="btn btn-tertiary" onclick="loadData()">
                    ğŸ“‚ ë¶ˆëŸ¬ì˜¤ê¸°
                </button>
                <button class="btn btn-primary" onclick="shareData()">
                    ğŸ“¤ ê³µìœ í•˜ê¸°
                </button>
            </div>
            
            <div class="success-message" id="successMessage"></div>
        </div>
    </div>

    <!-- í”Œë¡œíŒ… ì €ì¥ ë²„íŠ¼ -->
    <button class="floating-save" onclick="autoSave()">
        ğŸ’¾ ìë™ì €ì¥
    </button>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        const selectedData = {};
        let deferredPrompt;
        let autoSaveInterval;
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            updateProgress();
            updateSummary();
            loadAutoSave();
            startAutoSave();
            checkInstallPrompt();
        });

        // PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ ì²´í¬
        function checkInstallPrompt() {
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                document.getElementById('installPrompt').style.display = 'block';
            });
        }

        // ì•± ì„¤ì¹˜
        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        showMessage('ì•±ì´ ì„¤ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                    }
                    deferredPrompt = null;
                    document.getElementById('installPrompt').style.display = 'none';
                });
            }
        }

        // ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ ë¬´ì‹œ
        function dismissInstall() {
            document.getElementById('installPrompt').style.display = 'none';
        }

        // ì„¹ì…˜ í† ê¸€
        function toggleSection(button) {
            const content = button.parentElement.nextElementSibling;
            const isCollapsed = content.classList.contains('collapsed');
            
            if (isCollapsed) {
                content.classList.remove('collapsed');
                button.classList.remove('collapsed');
                button.textContent = 'â–¼';
            } else {
                content.classList.add('collapsed');
                button.classList.add('collapsed');
                button.textContent = 'â–²';
            }
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function initializeEventListeners() {
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.addEventListener('click', function(e) {
                    e.preventDefault();
                    const checkbox = this.querySelector('input[type="checkbox"]');
                    const isChecked = !checkbox.checked;
                    checkbox.checked = isChecked;
                    
                    if (isChecked) {
                        this.classList.add('selected');
                    } else {
                        this.classList.remove('selected');
                    }
                    
                    updateSelectedData();
                    updateProgress();
                    updateSummary();
                });
            });

            // íŠ¹ìˆ˜ ì„±ë¶„ ì…ë ¥ í•„ë“œ ì´ë²¤íŠ¸
            const specialInput = document.getElementById('specialIngredientInput');
            if (specialInput) {
                specialInput.addEventListener('input', function() {
                    updateSelectedData();
                    updateSummary();
                });
            }
        }

        // ì„ íƒëœ ë°ì´í„° ì—…ë°ì´íŠ¸
        function updateSelectedData() {
            const categories = document.querySelectorAll('.options');
            
            categories.forEach(categoryElement => {
                const categoryName = categoryElement.getAttribute('data-category');
                const selectedOptions = categoryElement.querySelectorAll('.option.selected');
                
                selectedData[categoryName] = [];
                selectedOptions.forEach(option => {
                    selectedData[categoryName].push(option.getAttribute('data-value'));
                });
            });

            // íŠ¹ìˆ˜ ì„±ë¶„ ì…ë ¥ê°’ ì¶”ê°€
            const specialInput = document.getElementById('specialIngredientInput');
            if (specialInput && specialInput.value.trim()) {
                selectedData['special-ingredients-detail'] = [specialInput.value.trim()];
            }
        }

        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateProgress() {
            const totalCategories = document.querySelectorAll('.category').length;
            const completedCategories = Object.keys(selectedData).filter(key => 
                selectedData[key] && selectedData[key].length > 0
            ).length;
            
            const progress = Math.min(Math.round((completedCategories / totalCategories) * 100), 100);
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // ìš”ì•½ ì„¹ì…˜ ì—…ë°ì´íŠ¸
        function updateSummary() {
            const summaryContainer = document.getElementById('selectedItems');
            summaryContainer.innerHTML = '';

            const categoryNames = {
                'products': 'ì œí’ˆ ì¢…ë¥˜',
                'functional': 'ê¸°ëŠ¥ì„±',
                'moq': 'ìµœì†Œì£¼ë¬¸ìˆ˜ëŸ‰',
                'certification': 'ì¸ì¦ ìš”êµ¬ì‚¬í•­',
                'region': 'íƒ€ê²Ÿ ì§€ì—­',
                'demographic': 'íƒ€ê²Ÿ ì—°ë ¹/ì„±ë³„',
                'skincare-type': 'ìŠ¤í‚¨ì¼€ì–´ íƒ€ì…',
                'capacity': 'ìš©ëŸ‰',
                'container-shape': 'ìš©ê¸° í˜•íƒœ',
                'container-material': 'ìš©ê¸° ì¬ì§ˆ',
                'retail': 'íŒë§¤ ì±„ë„',
                'marketing': 'ë§ˆì¼€íŒ… ë°©ì‹',
                'korea-market': 'í•œêµ­ ì‹œì¥ í”Œë«í¼',
                'business-type': 'ì‚¬ì—… ë°©ì‹',
                'ingredients': 'ì£¼ìš” ì„±ë¶„',
                'moisture': 'ìˆ˜ë¶„ ë°€ë„',
                'special-ingredients': 'íŠ¹ìˆ˜ ì„±ë¶„ ìš”ì²­',
                'special-ingredients-detail': 'íŠ¹ìˆ˜ ì„±ë¶„ ìƒì„¸',
                'label': 'ë¼ë²¨ ë””ìì¸',
                'brand': 'ë¸Œëœë“œ ë³´ìœ ',
                'consulting': 'ì»¨ì„¤íŒ… í•„ìš”ì„±'
            };

            Object.keys(selectedData).forEach(category => {
                if (selectedData[category] && selectedData[category].length > 0) {
                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'selected-category';
                    
                    const title = document.createElement('h4');
                    title.textContent = categoryNames[category] || category;
                    categoryDiv.appendChild(title);
                    
                    const list = document.createElement('ul');
                    list.className = 'selected-list';
                    
                    selectedData[category].forEach(item => {
                        const listItem = document.createElement('li');
                        listItem.textContent = item;
                        list.appendChild(listItem);
                    });
                    
                    categoryDiv.appendChild(list);
                    summaryContainer.appendChild(categoryDiv);
                }
            });

            if (summaryContainer.children.length === 0) {
                summaryContainer.innerHTML = '<p style="text-align: center; color: #666; font-style: italic;">ì•„ì§ ì„ íƒëœ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤. ìœ„ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.</p>';
            }
        }

        // ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        function exportData() {
            if (Object.keys(selectedData).length === 0) {
                showMessage('ë¨¼ì € ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            let exportText = '=== K-Beauty ì „ë¬¸ í”Œë«í¼ - í™”ì¥í’ˆ ì—°êµ¬ ê²°ê³¼ ===\n\n';
            
            const categoryNames = {
                'products': 'ì œí’ˆ ì¢…ë¥˜',
                'functional': 'ê¸°ëŠ¥ì„±',
                'moq': 'ìµœì†Œì£¼ë¬¸ìˆ˜ëŸ‰',
                'certification': 'ì¸ì¦ ìš”êµ¬ì‚¬í•­',
                'region': 'íƒ€ê²Ÿ ì§€ì—­',
                'demographic': 'íƒ€ê²Ÿ ì—°ë ¹/ì„±ë³„',
                'skincare-type': 'ìŠ¤í‚¨ì¼€ì–´ íƒ€ì…',
                'capacity': 'ìš©ëŸ‰',
                'container-shape': 'ìš©ê¸° í˜•íƒœ',
                'container-material': 'ìš©ê¸° ì¬ì§ˆ',
                'retail': 'íŒë§¤ ì±„ë„',
                'marketing': 'ë§ˆì¼€íŒ… ë°©ì‹',
                'korea-market': 'í•œêµ­ ì‹œì¥ í”Œë«í¼',
                'business-type': 'ì‚¬ì—… ë°©ì‹',
                'ingredients': 'ì£¼ìš” ì„±ë¶„',
                'moisture': 'ìˆ˜ë¶„ ë°€ë„',
                'special-ingredients': 'íŠ¹ìˆ˜ ì„±ë¶„ ìš”ì²­',
                'special-ingredients-detail': 'íŠ¹ìˆ˜ ì„±ë¶„ ìƒì„¸',
                'label': 'ë¼ë²¨ ë””ìì¸',
                'brand': 'ë¸Œëœë“œ ë³´ìœ ',
                'consulting': 'ì»¨ì„¤íŒ… í•„ìš”ì„±'
            };

            Object.keys(selectedData).forEach(category => {
                if (selectedData[category] && selectedData[category].length > 0) {
                    exportText += `${categoryNames[category] || category}:\n`;
                    selectedData[category].forEach(item => {
                        exportText += `  - ${item}\n`;
                    });
                    exportText += '\n';
                }
            });

            exportText += '\nìƒì„±ì¼: ' + new Date().toLocaleString('ko-KR');

            // í…ìŠ¤íŠ¸ íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œ
            const blob = new Blob([exportText], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'K-Beauty_í™”ì¥í’ˆì—°êµ¬ê²°ê³¼_' + new Date().toISOString().slice(0, 10) + '.txt';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);

            showMessage('ì²´í¬ë¦¬ìŠ¤íŠ¸ ê²°ê³¼ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
        }

        // ë°ì´í„° ì €ì¥
        function saveData() {
            const dataToSave = {
                selectedData: selectedData,
                timestamp: new Date().toISOString(),
                specialIngredient: document.getElementById('specialIngredientInput').value
            };
            
            try {
                const jsonData = JSON.stringify(dataToSave, null, 2);
                const blob = new Blob([jsonData], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'K-Beauty_ì €ì¥ë°ì´í„°_' + new Date().toISOString().slice(0, 10) + '.json';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                
                showMessage('ë°ì´í„°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            } catch (error) {
                showMessage('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        function loadData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const loadedData = JSON.parse(e.target.result);
                            if (loadedData.selectedData) {
                                // ê¸°ì¡´ ì„ íƒ ì´ˆê¸°í™”
                                document.querySelectorAll('.option.selected').forEach(opt => {
                                    opt.classList.remove('selected');
                                    opt.querySelector('input').checked = false;
                                });
                                
                                // ë¶ˆëŸ¬ì˜¨ ë°ì´í„° ì ìš©
                                Object.keys(loadedData.selectedData).forEach(category => {
                                    const categoryElement = document.querySelector(`[data-category="${category}"]`);
                                    if (categoryElement) {
                                        loadedData.selectedData[category].forEach(value => {
                                            const option = categoryElement.querySelector(`[data-value="${value}"]`);
                                            if (option) {
                                                option.classList.add('selected');
                                                option.querySelector('input').checked = true;
                                            }
                                        });
                                    }
                                });
                                
                                // íŠ¹ìˆ˜ ì„±ë¶„ ì…ë ¥ê°’ ë³µì›
                                if (loadedData.specialIngredient) {
                                    document.getElementById('specialIngredientInput').value = loadedData.specialIngredient;
                                }
                                
                                updateSelectedData();
                                updateProgress();
                                updateSummary();
                                showMessage('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!', 'success');
                            }
                        } catch (error) {
                            showMessage('íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
                        }
                    };
                    reader.readAsText(file);
                }
            });
            input.click();
        }

        // ê³µìœ í•˜ê¸°
        function shareData() {
            if (Object.keys(selectedData).length === 0) {
                showMessage('ë¨¼ì € ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            if (navigator.share) {
                const shareText = generateShareText();
                navigator.share({
                    title: 'K-Beauty í™”ì¥í’ˆ ì—°êµ¬ ê²°ê³¼',
                    text: shareText
                }).then(() => {
                    showMessage('ê³µìœ ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                }).catch(err => {
                    fallbackShare();
                });
            } else {
                fallbackShare();
            }
        }

        // ëŒ€ì²´ ê³µìœ  ë°©ë²•
        function fallbackShare() {
            const shareText = generateShareText();
            if (navigator.clipboard) {
                navigator.clipboard.writeText(shareText).then(() => {
                    showMessage('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                });
            } else {
                showMessage('ê³µìœ  ê¸°ëŠ¥ì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ê³µìœ  í…ìŠ¤íŠ¸ ìƒì„±
        function generateShareText() {
            let shareText = 'K-Beauty í™”ì¥í’ˆ ì—°êµ¬ ê²°ê³¼\n\n';
            const categoryNames = {
                'products': 'ì œí’ˆ ì¢…ë¥˜',
                'functional': 'ê¸°ëŠ¥ì„±',
                'moq': 'ìµœì†Œì£¼ë¬¸ìˆ˜ëŸ‰',
                'certification': 'ì¸ì¦ ìš”êµ¬ì‚¬í•­'
            };

            Object.keys(selectedData).slice(0, 4).forEach(category => {
                if (selectedData[category] && selectedData[category].length > 0) {
                    shareText += `${categoryNames[category] || category}: ${selectedData[category].join(', ')}\n`;
                }
            });

            return shareText;
        }

        // ìë™ì €ì¥ ì‹œì‘
        function startAutoSave() {
            autoSaveInterval = setInterval(() => {
                if (Object.keys(selectedData).length > 0) {
                    const dataToSave = {
                        selectedData: selectedData,
                        timestamp: new Date().toISOString(),
                        specialIngredient: document.getElementById('specialIngredientInput').value
                    };
                    
                    // ë©”ëª¨ë¦¬ì— ì„ì‹œ ì €ì¥
                    window.tempSaveData = dataToSave;
                }
            }, 30000); // 30ì´ˆë§ˆë‹¤ ìë™ì €ì¥
        }

        // ìë™ì €ì¥ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadAutoSave() {
            if (window.tempSaveData) {
                const loadedData = window.tempSaveData;
                if (loadedData.selectedData && Object.keys(loadedData.selectedData).length > 0) {
                    if (confirm('ì´ì „ì— ì‘ì„±í•˜ë˜ ë‚´ìš©ì´ ìˆìŠµë‹ˆë‹¤. ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        // ë¶ˆëŸ¬ì˜¨ ë°ì´í„° ì ìš© ë¡œì§ (loadDataì™€ ë™ì¼)
                        Object.keys(loadedData.selectedData).forEach(category => {
                            const categoryElement = document.querySelector(`[data-category="${category}"]`);
                            if (categoryElement) {
                                loadedData.selectedData[category].forEach(value => {
                                    const option = categoryElement.querySelector(`[data-value="${value}"]`);
                                    if (option) {
                                        option.classList.add('selected');
                                        option.querySelector('input').checked = true;
                                    }
                                });
                            }
                        });
                        
                        if (loadedData.specialIngredient) {
                            document.getElementById('specialIngredientInput').value = loadedData.specialIngredient;
                        }
                        
                        updateSelectedData();
                        updateProgress();
                        updateSummary();
                    }
                }
            }
        }

        // ìˆ˜ë™ ìë™ì €ì¥
        function autoSave() {
            if (Object.keys(selectedData).length > 0) {
                const dataToSave = {
                    selectedData: selectedData,
                    timestamp: new Date().toISOString(),
                    specialIngredient: document.getElementById('specialIngredientInput').value
                };
                
                window.tempSaveData = dataToSave;
                showMessage('ìë™ì €ì¥ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            } else {
                showMessage('ì €ì¥í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ë©”ì‹œì§€ í‘œì‹œ
        function showMessage(text, type = 'success') {
            const messageElement = document.getElementById('successMessage');
            messageElement.textContent = text;
            messageElement.className = `success-message ${type === 'success' ? '' : 'error'} show`;
            
            setTimeout(() => {
                messageElement.classList.remove('show');
            }, 3000);
        }

        // í˜ì´ì§€ ì¢…ë£Œ ì „ ê²½ê³ 
        window.addEventListener('beforeunload', function(e) {
            if (Object.keys(selectedData).length > 0) {
                e.preventDefault();
                e.returnValue = '';
            }
        });
    </script>
</body>
</html>